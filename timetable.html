<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Timetable</title>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
        }
        .container {
            width: 80%;
            margin: 50px auto;
            background-color: #ffffff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            border-radius: 8px;
        }
        h1, h2 {
            text-align: center;
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        td {
            background-color: #f9f9f9;
        }
        .btn {
            display: inline-block;
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 4px;
            text-align: center;
            margin-top: 20px;
        }
        .btn:hover {
            background-color: #45a049;
        }
        form {
            margin-top: 30px;
            text-align: center;
        }
        input, select {
            padding: 10px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .back-dashboard {
            text-align: center;
            margin-bottom: 20px;
        }
        .back-dashboard .btn {
            background-color: #007BFF;
            margin: 0;
        }
        .back-dashboard .btn:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <!-- Back to Dashboard Section -->
    <div class="back-dashboard">
        <a href="dashboard.html" class="btn">Back to Dashboard</a>
    </div>

    <div class="container">
        <h1>Teacher Timetable</h1>
        <!-- Timetable Table -->
        <table>
            <thead>
                <tr>
                    <th class="time-column">Time</th>
                    <th>9:00 AM - 10:00 AM</th>
                    <th>10:00 AM - 11:00 AM</th>
                    <th>11:00 AM - 12:00 PM</th>
                    <th>12:00 PM - 1:00 PM</th>
                    <th>1:00 PM - 2:00 PM</th>
                    <th>2:00 PM - 3:00 PM</th>
                    <th>3:00 PM - 4:00 PM</th>
                    <th>4:00 PM - 5:00 PM</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Monday</td>
                    <td>AI Basics</td>
                    <td>Data Structures</td>
                    <td>Machine Learning</td>
                    <td>Artificial Neural Networks</td>
                    <td>Lunch</td>
                    <td>Database Systems</td>
                    <td>Computer Networks</td>
                    <td>Math for ML</td>
                </tr>
                <tr>
                    <td>Tuesday</td>
                    <td>Data Science</td>
                    <td>Python Programming</td>
                    <td>Deep Learning</td>
                    <td>Statistics</td>
                    <td>Lunch</td>
                    <td>Cloud Computing</td>
                    <td>Cybersecurity</td>
                    <td>AI Ethics</td>
                </tr>
                <tr>
                    <td>Wednesday</td>
                    <td>AI Basics</td>
                    <td>Algorithms</td>
                    <td>Machine Learning</td>
                    <td>Computer Vision</td>
                    <td>Lunch</td>
                    <td>Big Data</td>
                    <td>Software Engineering</td>
                    <td>Math for ML</td>
                </tr>
                <tr>
                    <td>Thursday</td>
                    <td>Data Science</td>
                    <td>Python Programming</td>
                    <td>Deep Learning</td>
                    <td>Artificial Neural Networks</td>
                    <td>Lunch</td>
                    <td>Database Systems</td>
                    <td>Computer Networks</td>
                    <td>AI Ethics</td>
                </tr>
                <tr>
                    <td>Friday</td>
                    <td>AI Basics</td>
                    <td>Algorithms</td>
                    <td>Machine Learning</td>
                    <td>Statistics</td>
                    <td>Lunch</td>
                    <td>Big Data</td>
                    <td>Cybersecurity</td>
                    <td>Math for ML</td>
                </tr>
                <tr>
                    <td>Saturday</td>
                    <td>Research Methodology</td>
                    <td>Machine Learning</td>
                    <td>Data Analysis</td>
                    <td>Python for AI</td>
                    <td colspan="4" style="background-color: #f4f4f9;">No Lectures</td>
                </tr>
            </tbody>
        </table>

        <!-- Form for selecting a lecture -->
        <form id="lecture-form">
            <h2>Mark Absence and Notify</h2>
            <label for="date">Select Date:</label>
            <input type="date" id="date" name="date" required>

            <label for="day">Select Day:</label>
            <select id="day" name="day" required>
                <option value="Monday">Monday</option>
                <option value="Tuesday">Tuesday</option>
                <option value="Wednesday">Wednesday</option>
                <option value="Thursday">Thursday</option>
                <option value="Friday">Friday</option>
                <option value="Saturday">Saturday</option>
            </select>

            <label for="time">Select Lecture:</label>
            <select id="time" name="time" required>
                <option value="9:00 AM - 10:00 AM">9:00 AM - 10:00 AM</option>
                <option value="10:00 AM - 11:00 AM">10:00 AM - 11:00 AM</option>
                <option value="11:00 AM - 12:00 PM">11:00 AM - 12:00 PM</option>
                <option value="12:00 PM - 1:00 PM">12:00 PM - 1:00 PM</option>
                <option value="1:00 PM - 2:00 PM">1:00 PM - 2:00 PM</option>
                <option value="2:00 PM - 3:00 PM">2:00 PM - 3:00 PM</option>
                <option value="3:00 PM - 4:00 PM">3:00 PM - 4:00 PM</option>
                <option value="4:00 PM - 5:00 PM">4:00 PM - 5:00 PM</option>
            </select>

            <button type="submit">Mark Absence</button>
        </form>
    </div>

    <script>
        document.getElementById('lecture-form').addEventListener('submit', function (e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = {
                date: formData.get('date'),
                day: formData.get('day'),
                time: formData.get('time')
            };

            fetch('http://127.0.0.1:5000/mark_absent', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.message) {
                    alert(result.message);
                    window.location.href = "notifications.html"; // Redirect to notifications page
                } else {
                    alert('Failed to mark absence. ' + result.error);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            });
        });
    </script>
</body>
</html>
